description: >
  install ecschedule

steps:
  - run:
      name: Install Go
      command: |
        # refs https://golang.org/doc/install
        wget https://golang.org/dl/go1.16.5.linux-amd64.tar.gz -O /tmp/go-linux-amd64.tar.gz
        rm -rf /usr/local/go && tar -C /usr/local -xzf /tmp/go-linux-amd64.tar.gz
        export PATH=$PATH:/usr/local/go/bin
        go version
  - run:
      name: Install ecschedule
      command: |
        export PATH=$PATH:/usr/local/go/bin
        go get github.com/Songmu/ecschedule/cmd/ecschedule
        sudo install ~/go/bin/ecschedule /usr/local/bin/ecschedule
        ecschedule --version
